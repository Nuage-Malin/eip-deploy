jenkins:
  systemMessage: Nuage Malin

  securityRealm:
    local:
      allowsSignup: false

  authorizationStrategy:
    roleBased:
      roles:
        global:
          - name: Admin
            permissions:
              - Overall/Administer
          - name: Manager
            description: Can read, build and cancel jobs
            permissions:
              - Overall/Read
              - Job/Read
              - Job/Build
              - Job/Cancel
          - name: Developer
            description: Can read and cancel jobs
            permissions:
              - Overall/Read
              - Job/Read
              - Job/Cancel
          - name: Visitor
            description: Read-only on jobs
            permissions:
              - Overall/Read
              - Job/Read

jobs:
  - file: ${JENKINS_HOME}/job_dsl/jenkins.groovy

security:
  GlobalJobDslSecurityConfiguration:
    useScriptSecurity: true

credentials:
  system:
    domainCredentials:
      - credentials:
          - basicSSHUserPrivateKey:
              scope: GLOBAL
              id: eip_front_production
              passphrase: nm_eip_front_ssh
              description: SSH deploy key to clone production front repository
              privateKeySource:
                directEntry:
                  privateKey: ${readFile:/run/secrets/nm_eip_front_ssh}
          - basicSSHUserPrivateKey:
              scope: GLOBAL
              id: eip_back_production
              passphrase: nm_eip_back_ssh
              description: SSH deploy key to clone production back repository
              privateKeySource:
                directEntry:
                  privateKey: ${readFile:/run/secrets/nm_eip_back_ssh}
